## Changes to be done for Chatbot

# [ ] chnage code of ClientChatController
if (!$selectedProjectID || !$selectedProjectName || !$userQuery) {
    return view('client.chat.openchat-ai', [
        'content' => 'Please include project ID, name, and your question in the correct format.'
    ])->with('dev', 0);
}

to

if (!$selectedProjectID || !$selectedProjectName) {
    return view('client.chat.openchat-ai', [
        'content' => 'Please select a project first.'
    ])->with('dev', 0);
} elseif (!$userQuery) {
    return view('client.chat.openchat-ai', [
        'content' => 'Please ask your question.'
    ])->with('dev', 0);
}

and 

// ðŸ”¹ Build GPT messages 
$messages = []; 
$messages[] = [ "role" => "system", "content" => "You are Pearl Organisationâ€™s AI Assistant. Here is detailed data for the client's selected project." ]; $messages[] = [ "role" => "user", "content" => "Client Query: {$userQuery}\n\nProject Data (JSON): {$jsonData}\n\nWrite a well-structured, professional paragraph about this specific project." ];

to 

// ðŸ”¹ Build GPT messages
$messages = [];
$messages[] = [
    "role" => "system",
    "content" => "You are Pearl Organisationâ€™s AI Assistant. 
Your job is to answer client queries by reading the given JSON data and replying in HTML format that can be embedded in a webpage. 

Rules:
- Always reply in HTML only.
- Use <br> for line breaks, <ul>/<li> for lists, and <a> for links.
- Keep answers short and direct , do not add much explanations or filler ending questions.
- If user asks for a project-specific item (like 'report,ticket,complete rate, status'), find the info in provided JSON.
- if user asks for link of invoices, bills, billing or payments always provide him exact this link https://clientworkspace.pearlorganisation.in/client/billings .
- if user asks for link of project link , project status, project details , project progress or completion rate always provide him https://clientworkspace.pearlorganisation.in/client/billings. in this link id is dynamic .
- if user asks for link for reports, project report or daily reports provide him link similar to  https://clientworkspace.pearlorganisation.in/client/billings. in this link id is dynamic .
- if user asks for tickets,client tickets or tokens provide him latest max 3 tickets links. tickets links are similar to this  https://clientworkspace.pearlorganisation.in/client/billings. in this link id is dynamic .
- For links, always return: Here is the (project status / report / invoices / ticket etc.) link: <a href='URL' target='_blank'>TEXT</a>.
- If multiple items exist, list them with <ul><li>.
- If no data is found, respond: No data found.
Synonym Mapping:
- 'token','client tickets','issues','client_tickets' = 'tickets'
- 'bill', 'billing','payments' = 'invoices'
- 'progress', 'completion','status' = 'completion_rate'
- 'report', 'updates' = 'project_reports'
- 'client' = 'client_name'
Use these mappings automatically when interpreting queries."
];
$messages[] = [
    "role" => "user",
    "content" => "Client Query: {$userQuery}\n\nProject Data (JSON): {$jsonData}"
];



# [ ] chnage code of open-ai-blade file
change select project to follwoing 

<select name="project_id" id="projectSelect" required>
    @foreach ($projects as $index => $project)
        @if (!$project->is_disabled)
            <option value="{{ $project->id }}" @if($index === 0) selected @endif>
                {{ $project->project_name }}
            </option>
        @endif
    @endforeach
</select>





# [ ] chnage code of client/chat/index-blade file
-change script to:

// Variable to store the selected project name & ID
var selectedProjectName = "";
var selectedProjectID = "";
// Listen for project dropdown changes
$(document).on("change", "#projectSelect", function () {
    selectedProjectID = $(this).find("option:selected").val();
    selectedProjectName = $(this).find("option:selected").text().trim();
});
// On form submit
$(document).on("submit", "#openai_form", function (e) {
    e.preventDefault();
    // âœ… Ensure latest values are always fetched
    var $selected = $("#projectSelect option:selected");
    selectedProjectID = $selected.val();
    selectedProjectName = $selected.text().trim();
    // ... your form submission logic continues here ...
});


-change html to 
<form method="POST" action="https://ai.pearlorganisation.in/openai/chat/store" id="openai_form">
                        <input type="hidden" name="_token" value="OHSSYEpCOQxeqbUu5S8mUCCeJqQLEFvfLu77t6p3">                        <div class="searchInner">
                            <input type="text" placeholder="Ask Pearl Assistant Anything" class="form-control openai_input" autofocus required/>
                        </div>
                        <div class="col-md-12 text-center text-muted mt-3" style="font-size: 10px;">
                            Pearl Assistant (AI) can make mistakes. Check important info.
                        </div>
                    </form>
-check what is _token is for



# [ ] chnage code of employee/chat/index-blade file
-remove if else condition
@if(empty($projectMemberDatGlobal)){
    ....
@elseif()
    ....
}


- [ ] Add support for multiple languages
- [ ] Enhance error handling and fallback responses
- [ ] Integrate with external APIs (e.g., weather, news)
- [ ] Implement user authentication
- [ ] Optimize response time
- [ ] Add logging for user interactions
- [ ] Update documentation
